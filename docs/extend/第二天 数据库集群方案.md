# 数据库的问题 #
+ 高并发的连接能力
+ 大数据量时的存储能力
+ 大数据量的查询能力
+ 系统异常时的容灾能力

主从 集群 ： 多数据源的问题 （Amoeba 可以来做这些事情 ）
### 数据库的主从复制（备份） ###
#### 冷备份 ####
定时  进行 对主表的 备份 **数据库加锁 **

#### 热备份 ####
在之基础上才能读写分离。

主 二进制日志（需要手动打开） 从 i/o线程 读取  再sql线程 复制 

修改主库 my.ini   log-bin = mysql-bin   server-id = 1

https://blog.csdn.net/KingCat666/article/details/78324678

### 分区技术 ###
资源合理复用  避免索引失效（子查询等） 索引不是越多越好 缩小查询范围

1.	业务层面拆（例如：年份，地区等区分。）
2.	数据库加锁 和 消息队列

针对海量数据的优化两种方案：1.分库 拆表 2.sql语句优化 3.从库 修改存储引擎为MyISAM

#### 拆表：
1. 垂直拆分：多表有同一id 不同字段，   **会影响到预先写的代码**
2. 水平拆分：一个表变多个表，字段相同 按照数量拆分 逻辑变难
#### 分区技术 ####
物理层面分区，逻辑层面还是一张表，分表技术的另外一种实现，

mysql 5.0 开始支持的分区技术

**RANGE分区：**按照连续区间进行分区，不能重复，重叠，把多行分配给分区。例如：[1-10) [10-20)

**LIST分区：**类似与按RANGE分区，区别在于LIST分区基于列值匹配一个离散值集合中的某个值来进行选择。例如：{1,2,3}  {4,5,6}

	PARTITION BY LIST (store_id){ //store_id 为表中字段  也必须为主键
		PARTITION p0 VALUES IN ( ,,,)
			。。。
	}


**HASH分区：**前面分区个数可以不固定，基于用户定义的表达式的返回值来进行选择的分区，该表达式使用将要插入到表中数据的列值进行计算。

	PARTITION BY HASH(YEAR(hired))   //按照YEAR(hired)的hash值 进行计算
	PARTITIONS 4;

## amoeba ##
作用：

1. 为主从负载提供同一的透明访问通道
2. 实现数据库的读写分离
3. 代替管理数据库
4. 可以作为数据的代理

依赖主从复制
### 使用 ###
修改自带的 配置文件  用java 写的  需要jdk环境

**还可对分区的管理**。