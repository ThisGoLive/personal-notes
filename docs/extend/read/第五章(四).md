# 第五章(四)

## 高可用的网站软件质量

网站运维中,除了网络,服务器等硬件故障导致的系统风险外,还有来自软件系统自己的风险.

### 网站发布

网站保证 7x24 高可用运行,同时网站又需要不断地发布新功能吸引用户保证在激烈的市场竞争中获得成功.许多大型网站每周都发布一到两次,而中小型则更加频繁.

由于不断地发布,用户需要面对每周几次 的宕机故障.但网站发布是一次提前预知的服务器宕机,所以过程更加柔和.

#### 自动化测试

代码在发布到线上服务器前需要进行严格的测试.

大部分网站采用 web 自动化测试技术,使用自动测试工具或脚本完成测试,

大网站通常会自己开发自动化测试工具,可以一键完成系统的部署,测试数据生成,测试执行,测试报告生成等全部测试过程.

#### 预发布验证

即便通过严格测试,软件部署到线上服务器后还是经常出现各种问题,甚至根本无法启动服务器.主要原因是测试环境与线上环境不同,特别是应用需要依赖的其他服务,如数据库,缓存,公用业务服务等.

#### 代码控制

大部分网站使用的的源代码版本控制 SVN.SVN 代码控制和版本发布方式有两种

1.主干开发,分支发布

代码修改在主干上进行,需要发布的时候,从主干上拉一个分支发布,该分支即成为一个发布版本,如果该版本发现问题,继续在该分支上修改发布,并将修改合并主干,直到下次主干发布.

2.分支开发,主干发布

任何修改都不得在主干上直接进行,需要开发一个新功能或者修复一个 bug 时,中主干拉一个分支进行开发,开发完成且通过测试,合并回主干,然后进行从主干发布,这样主干发布就永远是最新的版本.
