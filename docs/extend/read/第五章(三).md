# 第五章(三) #
## 高可用的数据##
关于服务器缓存服务的高可用:

一:缓存已成为网站数据服务的重要部分,事实上承担了业务中绝大多数的数据读取访问服务,缓存失效可能导致数据库负载过高而宕机,影响整个网站的可用性,因此缓存服务需要实现和数据存储服务同样的高可用;

二:缓存部不是数据存储服务,缓存服务器宕机引起缓存数据丢失导致服务器压力过高应该通过其他手段解决,而不是提高缓存服务本身的高可用.
### CAP原理 ###
为了保证数据的高可用,网站通常会牺牲另外一个也很重要的指标:数据一致性:
#### 数据持久性 ####
保证数据可持久化,在各种情况下都不会出现数据丢失的问题.为了实现数据的持久性,不但在写入数据时需要写入持久性存储,还需要将数据备份一个或多个副本,存放在不同的物理存储设备上,数据不会丢失.
#### 数据的可访问性 ####
在多分数据副本分别在不同的存储设备的情况下,如果一个数据存储设备损害,就需要将数据访问切换到另一个数据存储设备上.若这个过程不是很块,这段时间不可访问.
#### 数据的一致性 ####
CAP原来认为,一个提供数据服务的存储系统无法同时满足数据一致性,数据可用性,分区耐受性,这三个条件.
#### 数据强一致 ####
各个副本的数据在物理存储中总是一致的.
#### 数据用户一致 ####
即数据在物理存储中的各个副本的数据可能是不一致的,但是最终用户访问时,通过纠错和校验机制,可以确定一个一致的正确的数据返回用户.
#### 数据最终一致 ####
数据一致性中较弱的一种,即物理存储的数据肯能是不一致的,终端用户访问的数据也不一致的,但经过系统一段事件的自我恢复,数据最终一致.
### 数据备份 ###
冷备的优点是简单和廉价,成本和技术难度都较低,缺点不能保证数据最终一致,由于数据是定期复制,因此备份设备的数据比系统中的数据陈旧,如果系统数据丢失,那么从上个备份点开始后更新的数据就会永久丢失,不能从备份中恢复.

同步方式指,多份数据副本的写入操作同步完成,即应用程序收到数据服务系统的写入成功响应时,多份数据已经操作完成.
### 失效转移 ###
#### 失效确认 ####
判断服务器宕机是系统进行失效转移的第一步.
#### 访问转移 ####
确认某台数据存储服务器器宕机后,将数据读写访问重新路由到其他服务器上.
#### 数据恢复 ####
因某服务器宕机,所以数据存储的副本数目减少,必须将副本的数目恢复到系统设定值,否则,再有服务器宕机时,就可能无法访问转移,数据永久丢失的情况.