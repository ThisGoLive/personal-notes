# 第四章:瞬时响应,网站的高性能架构 (一)#

网站性能是客观的指标,可以具体到响应时间,吞吐量等技术,同时也是主观的感受.

## 网站性能测试

#### 不同视角下的网站性能

- 用户视角的网站性能:

从用户视角来说.网站性能就是用户在浏览器上的直观感受到的网站响应速度快慢。不同的计算机性能,不同的浏览器对 html 的解析能力.

- 开发人员视角的网站性能

开发人员主要关注的是应用程序本身及相关子系统的性能,包括延迟响应,系统吞吐量,处理并发能力,系统的稳定性等技术指标.主要优化手段使用缓存读取,集群等.

- 运维人员视角的网站性能

运维更加关注基础设施和资源利用率,如网络运营商的带宽能力,服务器的配置,数据中的网络架构.等优化手段:假设优化骨干网,使用性价比定制服务器.

#### 性能测试指标

从开发和测试人员的视角,网站性能的指标:响应时间,并发数,吞吐量,性能计数器等;

**1.响应时间**包括,从请求发出开始到收到最后的响应数据所需要的时间.

**2.并发数**指系统能够同时处理请求的数目,这个数组也反应了系统的负载特性,对于网站而言,并发数指用户请求数

**3.吞吐量**指单位时间内系统处理请求的数量。提箱系统的处理能力.
打个比方:吞吐量是每天通过高速路收费站 车数量,并发数值高速路上正在行驶的车辆数目.响应时间是车速,车少时,车速快,但是过收费站的数量少.

**4.性能计数器**描述服务器或者操作系统 性能的数据指标.

#### 性能测试方法

#####性能测试
不断对系统施加压力,验证系统在资源可以接受范围内,能否到达预期性能 #####负载测试
对系统不断增加请求以增加系统压力,知道某项或多项性能达到安全临界值, #####压力测试
超过安全负载 的情况下,对系统继续施加压力,知道系统崩溃或不能在处理任何请求,以此获取系统最大承受压力. #####稳定性测试
在硬件软件允许的情况下,给系统加载一定的业务压力,使系统允许段较长时间,以此检测系统的稳定性.

#### 性能报告测试

阅读者可以清楚看到系统性能是否满足设计目标和业务要求,系统的最大负载能力,系统最大承受压力等

#### 性能优化策略

#####性能分析
检测请求处理的各个环节的日志,分析哪个环节影响时间不合理,超过预期.然后分析影响新能的主要原因. #####性能优化
web 前端性能优化,应用服务器性能优化,存储服务器性能优化 3 类.

## web 前端性能优化

主要手段:优化浏览器的访问,使用反向代理,cdn

#### 流量器访问优化

#####减少 http 请求
http 是无状态协议,意味每次请求需要建立通信链路,减少 http 的手段:合并 css,合并 javaScript ,合并图片,将多次 http 请求的数据放到一起 #####使用流量器缓存
在某些时候,静态资源文件变量需求及时应用到客户端流量器, #####启用压缩  
将数据压缩,减少数据传输量
#####css 放最上面 js 放页面最下面
css 会率先渲染页面,所以先,而 js 有肯阻塞页面的加载,故放最下. #####减少 cookie 传输
避免静态资源用过 cookie 传输

#### cdn 加速

本质还是缓存,将数据放在离用户近的地方,加快响应速度

#### 反向代理

方向代理,相当于在请求访问服务器前加的分配室,可以有安全保障,也可以配置缓存功能加上 web 请求,当用户请求点一次访问静态内容时,静态内容就被缓存在方向代理服务器上.这样可以直接拿取,不用再去访问服务器拍队.
