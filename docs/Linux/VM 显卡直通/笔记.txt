https://gitee.com/ledisthebest/LEDs-single-gpu-passthrough/blob/main/README-cn.md
https://space.bilibili.com/589560036/channel/seriesdetail?sid=2031728
1. CPU 开启虚拟化
开启IOMMU和虚拟化。通常在CPU高级选项里面，AMD处理器的一般叫Virtualization Technology或AMD-Vi，英特尔的叫VT-x或VT-d。

2. grub 开启
sudo nvim /etc/default/grub2
amd_iommu=on intel_iommu=on 可视情况添加（修复或导致黑屏）：iommu=pt
GRUB_CMDLINE_INE_LINUX_DEFAULT=""

3. 重启
dmesg | grep -e DMAR -e IOMMU
找到amd_IOMMU:Detected 或者 Intel-IOMMU: enabled

4. 运行 iommu.sh。
找到显卡 组
sudo nvim /etc/modprobe.d/vfio.conf

options vfio-pci ids=
# 下边是 单显卡配置
options vfio-pci disable_idle_d3=1
options vfio-pci disable_vga=1

5. 安装简单的虚拟机 KVM
wind 增强 https://github.com/virtio-win/virtio-win-pkg-scripts
qemu libvirt edk2-ovmf virt-manager dnsmasq ebtables iptables bridge-utils gnu-netcat

systemctl start libvirtd   systemctl enable libvirtd

普通用户无法访问virt-manager https://zhuanlan.zhihu.com/p/28307813
virsh net-start default    virsh net-autostart default

Network not found: no network with matching name 'default'  # https://www.cnblogs.com/jottings/p/11831413.html
virsh net-list --all  没有 检查/usr/share/libvirt/networks/目录下有没有default.xml文件
普通用户无法访问virt-manager https://zhuanlan.zhihu.com/p/28307813
virt-manager 中网络有相关
